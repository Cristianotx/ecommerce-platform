"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getBuildApplicationFunction = getBuildApplicationFunction;
async function getBuildApplicationFunction() {
    const { VERSION } = await Function('return import("@angular/compiler-cli")')();
    const angularVersion = Number(VERSION.major);
    const angularMinor = Number(VERSION.minor);
    let buildApplicationInternal;
    if (angularVersion < 16 || (angularVersion === 16 && angularMinor <= 2)) {
        throw new Error('This builder is not supported with versions earlier than Angular v16.2');
    }
    else if (angularVersion >= 16 && angularVersion < 18) {
        const { buildApplicationInternal: buildApplicationInternalFn, } = require('@angular-devkit/build-angular/src/builders/application');
        buildApplicationInternal = buildApplicationInternalFn;
    }
    else {
        const { buildApplicationInternal: buildApplicationInternalFn, } = require('@angular/build/private');
        buildApplicationInternal = buildApplicationInternalFn;
    }
    return { buildApplicationInternal, angularVersion };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV2a2l0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvdml0ZXN0LWFuZ3VsYXIvc3JjL2xpYi9idWlsZGVycy9idWlsZC9kZXZraXQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxrRUE0QkM7QUE1Qk0sS0FBSyxVQUFVLDJCQUEyQjtJQUMvQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEdBQUcsTUFBTyxRQUFRLENBQ2pDLHdDQUF3QyxDQUN6QyxFQUE2RCxDQUFDO0lBRS9ELE1BQU0sY0FBYyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDN0MsTUFBTSxZQUFZLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMzQyxJQUFJLHdCQUFrQyxDQUFDO0lBRXZDLElBQUksY0FBYyxHQUFHLEVBQUUsSUFBSSxDQUFDLGNBQWMsS0FBSyxFQUFFLElBQUksWUFBWSxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDeEUsTUFBTSxJQUFJLEtBQUssQ0FDYix3RUFBd0UsQ0FDekUsQ0FBQztJQUNKLENBQUM7U0FBTSxJQUFJLGNBQWMsSUFBSSxFQUFFLElBQUksY0FBYyxHQUFHLEVBQUUsRUFBRSxDQUFDO1FBQ3ZELE1BQU0sRUFDSix3QkFBd0IsRUFBRSwwQkFBMEIsR0FDckQsR0FBRyxPQUFPLENBQUMsd0RBQXdELENBQUMsQ0FBQztRQUV0RSx3QkFBd0IsR0FBRywwQkFBMEIsQ0FBQztJQUN4RCxDQUFDO1NBQU0sQ0FBQztRQUNOLE1BQU0sRUFDSix3QkFBd0IsRUFBRSwwQkFBMEIsR0FDckQsR0FBRyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQztRQUV0Qyx3QkFBd0IsR0FBRywwQkFBMEIsQ0FBQztJQUN4RCxDQUFDO0lBRUQsT0FBTyxFQUFFLHdCQUF3QixFQUFFLGNBQWMsRUFBRSxDQUFDO0FBQ3RELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QnVpbGRBcHBsaWNhdGlvbkZ1bmN0aW9uKCkge1xuICBjb25zdCB7IFZFUlNJT04gfSA9IGF3YWl0IChGdW5jdGlvbihcbiAgICAncmV0dXJuIGltcG9ydChcIkBhbmd1bGFyL2NvbXBpbGVyLWNsaVwiKScsXG4gICkoKSBhcyBQcm9taXNlPHsgVkVSU0lPTjogeyBtYWpvcjogc3RyaW5nOyBtaW5vcjogc3RyaW5nIH0gfT4pO1xuXG4gIGNvbnN0IGFuZ3VsYXJWZXJzaW9uID0gTnVtYmVyKFZFUlNJT04ubWFqb3IpO1xuICBjb25zdCBhbmd1bGFyTWlub3IgPSBOdW1iZXIoVkVSU0lPTi5taW5vcik7XG4gIGxldCBidWlsZEFwcGxpY2F0aW9uSW50ZXJuYWw6IEZ1bmN0aW9uO1xuXG4gIGlmIChhbmd1bGFyVmVyc2lvbiA8IDE2IHx8IChhbmd1bGFyVmVyc2lvbiA9PT0gMTYgJiYgYW5ndWxhck1pbm9yIDw9IDIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ1RoaXMgYnVpbGRlciBpcyBub3Qgc3VwcG9ydGVkIHdpdGggdmVyc2lvbnMgZWFybGllciB0aGFuIEFuZ3VsYXIgdjE2LjInLFxuICAgICk7XG4gIH0gZWxzZSBpZiAoYW5ndWxhclZlcnNpb24gPj0gMTYgJiYgYW5ndWxhclZlcnNpb24gPCAxOCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGJ1aWxkQXBwbGljYXRpb25JbnRlcm5hbDogYnVpbGRBcHBsaWNhdGlvbkludGVybmFsRm4sXG4gICAgfSA9IHJlcXVpcmUoJ0Bhbmd1bGFyLWRldmtpdC9idWlsZC1hbmd1bGFyL3NyYy9idWlsZGVycy9hcHBsaWNhdGlvbicpO1xuXG4gICAgYnVpbGRBcHBsaWNhdGlvbkludGVybmFsID0gYnVpbGRBcHBsaWNhdGlvbkludGVybmFsRm47XG4gIH0gZWxzZSB7XG4gICAgY29uc3Qge1xuICAgICAgYnVpbGRBcHBsaWNhdGlvbkludGVybmFsOiBidWlsZEFwcGxpY2F0aW9uSW50ZXJuYWxGbixcbiAgICB9ID0gcmVxdWlyZSgnQGFuZ3VsYXIvYnVpbGQvcHJpdmF0ZScpO1xuXG4gICAgYnVpbGRBcHBsaWNhdGlvbkludGVybmFsID0gYnVpbGRBcHBsaWNhdGlvbkludGVybmFsRm47XG4gIH1cblxuICByZXR1cm4geyBidWlsZEFwcGxpY2F0aW9uSW50ZXJuYWwsIGFuZ3VsYXJWZXJzaW9uIH07XG59XG4iXX0=